{
    "api_system":"beehive",
    "api_subsystem":"{{ subsystem }}",
    "api_modules":["beehive.module.auth.mod.AuthModule",
                   "beehive.module.basic.mod.BasicModule",
                   "beehive_oauth2.mod.Oauth2Module",
                   "beehive.module.catalog.mod.CatalogModule"],
    "api_plugins":[],
    "api_catalog":"{{ cmp.catalog }}",
    "api_endpoint":"{{ cmp.internal_endpoint }}",
    "db_uri":"{{ ssystem[subsystem].mysql }}",
    "redis_identity_uri":"{{ platform.redis.identity }}",
    "db_managers":["beehive.common.model.authorization.AuthDbManager",
                   "beehive_oauth2.model.Oauth2DbManager",
                   "beehive.module.catalog.model.CatalogDbManager"],
    "config":[
        {"group":"redis", "name":"redis_01", "value":"{{ platform.redis.identity }}"},
        {"group":"mail", "name":"server1", "value":"{{ mail_server }}"},
        {"group":"mail", "name":"sender1", "value":"{{ mail_user }}"},      
        {"group":"tcpproxy", "name":"proxy01", "value":"10.102.47.208"},
        {"group":"httpproxy", "name":"proxy02", "value":"{{ http_proxy }}"},
        {"group":"gateway", "name":"internet_spice", "value":{"name":"internet_spice", "host":"84.240.187.251", "port":80, "type":"spice"}},
        {"group":"gateway", "name":"internet_vnc", "value":{"name":"internet_vnc", "host":"84.240.187.251", "port":80, "type":"vnc"}},
        {"group":"gateway", "name":"rupar_spice", "value":{"name":"rupar_spice", "host":"10.102.81.197", "port":15900, "type":"spice"}},
        {"group":"gateway", "name":"rupar_vnc", "value":{"name":"rupar_vnc", "host":"10.102.81.197", "port":15900, "type":"vnc"}},
        {"group":"queue", "name":"queue.event", "value":{"name":"queue.event", "queue":"beehive.event", "uri":"{{ platform.redis.queue }}"}},
        {"group":"queue", "name":"queue.catalog", "value":{"name":"queue.catalog", "queue":"beehive.catalog", "uri":"{{ platform.redis.queue }}"}},
        {"group":"queue", "name":"queue.monitor", "value":{"name":"queue.monitor", "queue":"beehive.monitor", "uri":"{{ platform.redis.queue }}"}},

        {"group":"auth", "name":"local", "value":{"type":"db", "host":"localhost", "provider":"local", "ssl":false, "timeout":30}},
        {"group":"auth", "name":"domnt.csi.it", "value":{"type":"ldap", "host":"domnt.csi.it", "provider":"domnt.csi.it", "ssl":true,
          "timeout":30, "dn": "OU=OU_Csi_Piemonte,DC=domnt,DC=csi,DC=it", "search_filter": "(mail={username})",
          "search_id": "mail", "bind_user": "{{ domnt.bind_user }}", "bind_pwd": "{{ domnt.bind_pwd }}"}},
        {"group":"auth", "name":"csi.it", "value":{"ssl": true, "host": "ldap-servizirete.csi.it", "type": "ldap",
          "provider": "csi.it", "timeout": 30, "dn": "ou=People,o=servizirete,c=it", "search_filter": "(uid={username})",
          "search_id": "uid", "bind_user": "{{ psnet.bind_user }}", "bind_pwd": "{{ psnet.bind_pwd }}"}},
        {"group":"oauth2", "name":"endpoint", "value":"https://{{ groups['nginx'][0] }}"}
    ],
    "users":[
        {"type":"admin", "name":"{{ platform.admin.user }}", "pwd":"{{ platform.admin.pwd }}", "desc":"{{ platform.admin.desc }}"},
        {"type":"user", "name":"test1@local", "pwd":"{{ cmp.users.test1.pwd }}", "desc":"Test user 1"},
        {"type":"user", "name":"test2@local", "pwd":"{{ cmp.users.test2.pwd }}", "desc":"Test user 2"},
        {"type":"admin", "name":"test3@local", "pwd":"{{ cmp.users.test3.pwd }}", "desc":"Test admin user 3",
         "attribs":[
            {"name":"auth-filters", "value":"simplehttp", "desc":"simplehttp"},
            {"name":"auth-cidrs", "value":"158.102.160.0/24,10.102.160.0/24", "desc":"admin cidr"}]
        },
        {"type":"admin", "name":"camunda@local", "pwd":"{{ cmp.users.camunda.pwd  }}", "desc":"Camunda user",
         "attribs":[
            {"name":"auth-filters", "value":"simplehttp", "desc":"simplehttp"},
            {"name":"auth-cidrs", "value":"158.102.160.0/24,10.102.160.0/24,10.102.184.0/24", "desc":"admin cidr"}]
        }
    ],
    "catalogs":[
      {"name":"{{ cmp.catalog }}", "zone":"internal", "desc":"Local catalog"},
      {"name":"{{ platform.catalog_ext }}", "zone":"external", "desc":"Internet catalog", "endpoints":[
          {"name":"auth-ext.{{ cmp.vip }}",
           "desc":"Auth internet endpoint {{ cmp.vip }}",
           "service":"auth", "uri":"https://{{ cmp.vip }}:{{ cmp.port }}"},
          {"name":"event-ext.{{ cmp.vip }}",
           "desc":"Event internet endpoint {{ cmp.vip }}",
           "service":"event", "uri":"https://{{ cmp.vip }}:{{ cmp.port }}"},
          {"name":"resource-ext.{{ cmp.vip }}",
           "desc":"Resource internet endpoint {{ cmp.vip }}",
           "service":"resource", "uri":"https://{{ cmp.vip }}:{{ cmp.port }}"},
          {"name":"service-ext.{{ cmp.vip }}",
           "desc":"Service internet endpoint {{ cmp.vip }}",
           "service":"service", "uri":"https://{{ cmp.vip }}:{{ cmp.port }}"},
          {"name":"ssh-ext.{{ cmp.vip }}",
           "desc":"Ssh internet endpoint {{ cmp.vip }}",
           "service":"ssh", "uri":"https://{{ cmp.vip }}:{{ cmp.port }}"}
      ]}
    ]
}